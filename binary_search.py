import time
common = [
    "的","是","不","我","一","有","大","在","人","了",
    "中","到","资","要","以","可","这","个","你","会",
    "好","为","上","来","学","就","交","也","用","能",
    "如","时","文","说","没","他","看","那","问","生",
    "提","下","过","请","们","天","所","多","么","小",
    "之","想","得","工","出","还","电","对","都","机",
    "自","而","子","后","讯","家","站","心","只","去",
    "知","国","很","台","成","信","同","何","章","道",
    "发","地","法","无","然","但","当","于","吗","本",
    "年","现","前","最","真","新","和","因","果","意",
    "定","点","情","其","题","事","科","方","些","清",
    "三","样","此","吧","位","作","理","行","者","经",
    "名","什","谢","日","正","开","话","与","实","爱",
    "再","华","二","城","动","比","面","高","又","或",
    "力","应","女","种","教","车","分","像","系","长",
    "手","次","已","明","打","太","路","起","己","相",
    "主","关","十","间","凤","外","呢","觉","使","该",
    "友","才","进","凰","她","民","着","各","全","将",
    "少","两","加","回","感","式","第","球","性","老",
    "程","把","被","公","论","及","龙","校","别","体",
    "重","给","听","水","做","常","您","见","里","东",
    "风","解","湾","月","等","啦","部","原","美","先",
    "音","通","管","网","区","期","错","否","乐","入",
    "找","书","让","四","啊","由","选","较","数","表",
    "内","场","它","从","快","欢","至","立","目","社",
    "合","望","怎","认","告","更","几","考","度","难",
    "版","头","喜","许","光","今","买","算","弟","若",
    "统","身","记","代","号","处","完","接","计","言",
    "字","师","并","政","玩","张","男","谁","山","每",
    "结","且","星","非","建","改","连","放","哈","活",
    "研","直","设","陈","报","转","党","指","五","变",
    "气","西","试","希","神","取","化","物","王","任",
    "林","单","世","受","近","义","死","便","反","士",
    "战","空","队","跟","却","北","必","业","功","写",
    "影","声","平","台","员","金","讨","色","则","容",
    "档","片","向","妳","市","利","兴","白","强","安",
    "央","特","议","办","价","总","传","思","花","元",
    "叫","保","份","求","究","呵","件","未","决","组",
    "万","竹","级","持","笑","投","哪","室","曾","走",
    "喔","标","流","支","独","猫","卡","需","兄","门",
    "共","语","海","口","阿","线","马","黄","参","般",
    "命","视","观","联","脑","朋","格","儿","八","修",
    "料","钱","失","吃","住","即","另","录","专","象",
    "换","基","板","拿","远","速","形","孩","备","歌",
    "帮","确","候","除","界","装","类","讲","器","南",
    "案","画","英","诉","带","差","乎","量","久","掉",
    "似","整","引","班","迷","图","制","费","赛","奇",
    "识","型","超","边","耶","品","舍","虽","始","运",
    "李","务","权","验","故","六","读","怪","飞","满",
    "服","梦","收","眼","造","念","留","课","军","破",
    "精","半","约","愿","令","底","答","演","达","雄",
    "深","票","早","院","够","曲","假","谈","术","棒",
    "卖","黑","百","胜","推","存","火","准","示","往",
    "碟","易","况","晚","离","治","导","七","段","团",
    "调","证","列","伤","永","刚","排","哥","德","九",
    "甚","杀","照","软","包","怕","条","夜","商","概",
    "根","供","绝","千","客","切","集","称","据","落",
    "越","竟","尽","待","闻","园","忘","值","产","消",
    "双","红","座","展","育","跑","附","嘛","执","唱",
    "技","某","硬","斯","云","游","息","助","须","苦",
    "介","效","首","质","例","唉","职","复","输","节",
    "规","注","毕","查","热","油","馆","态","停","福",
    "救","倒","亲","害","乱","古","步","宝","击","举",
    "终","嗯","印","限","依","断","轻","环","简","趣",
    "志","响","随","练","续","鱼","篇","司","局","送",
    "极","角","省","源","阳","干","习","罗","武","免",
    "疑","拉","克","仍","楼","佛","足","低","广","烦",
    "鸟","显","码","土","率","圣","坏","初","具","预",
    "呀","众","责","争","兵","智","误","境","青","顺",
    "野","楚","贵","负","压","史","适","系","测","怀",
    "迎","配","魔","慢","哇","懂","呜","亦","味","评",
    "舞","细","医","帝","属","句","恋","败","宜","杨",
    "甲","追","灌","春","左","敢","灵","狂","际","群",
    "族","木","骑","里","项","戏","遇","狗","佳","博",
    "右","痛","营","妹","康","善","征","历","官","尔",
    "按","编","病","护","补","择","抓","石","岁","只",
    "领","寻","温","养","止","守","君","血","田","雨",
    "居","谓","异","优","跳","拜","烂","封","恶","良",
    "模","状","浪","聊","增","核","激","维","陆","吴",
    "牛","忙","词","剧","宿","急","啥","抱","静","攻",
    "亚","江","致","阵","严","宗","警","垒","夫","密",
    "睡","午","店","势","悲","兰","幕","缘","周","厂",
    "签","坐","香","爽","控","微","登","翻","普","蛮",
    "冷","威","毒","俊","络","辑","母","创","堂","赵",
    "套","旧","杂","周","述","恐","幸","亮","丽","巴",
    "礼","酒","仁","餐","牌","突","脚","剑","招","吉",
    "父","仔","典","搞","房","素","防","授","充","草",
    "暴","虑","绍","背","刘","委","府","景","忆","尤",
    "诸","缺","援","漫","琴","骂","纯","尚","艺","惜",
    "置","益","姐","诚","继","湖","欲","麻","靠","肉",
    "松","刻","纪","退","既","含","判","释","皮","波",
    "承","射","堆","莫","制","键","赶","旁","笔","扁",
    "注","奏","树","律","铁","荣","昨","毛","彩","归",
    "虎","罪","皆","叶","售","弹","卫","施","铭","刀",
    "块","汉","欣","布","赏","载","险","播","升","钟",
    "寄","弄","付","构","啰","磁","萤","伟","荐","洋",
    "嘿","启","梅","策","嘻","灯","鬼","检","宣","哦",
    "妈","均","派","猪","济","架","享","呆","训","蓝",
    "划","担","努","郭","歉","纸","贴","暗","呼","罢",
    "巧","慧","穿","详","雷","协","督","顾","脸","逢"
]

def gbk_encoding(array):
    encoded = []
    for hz in array:
        gbk_bytes = hz.encode('gbk')
        if len(gbk_bytes) == 1:
            val = gbk_bytes[0]
        else:
            val = (gbk_bytes[0] << 8) | gbk_bytes[1]
        encoded.append(val)
    return encoded

def mergeSort(array):
    if len(array) > 1:

        r = len(array)//2
        L = array[:r]
        M = array[r:]

        mergeSort(L)
        mergeSort(M)

        i = j = k = 0

        while i < len(L) and j < len(M):
            if L[i] < M[j]:
                array[k] = L[i]
                i += 1
            else:
                array[k] = M[j]
                j += 1
            k += 1

        while i < len(L):
            array[k] = L[i]
            i += 1
            k += 1

        while j < len(M):
            array[k] = M[j]
            j += 1
            k += 1

#First process time takes longer because array needs to be sorted
#Time measurement is separated 

common_array_gbk=gbk_encoding(common)

target=input("Input a Han Zi (to end program input no) : ")
target_gbk=target.encode('gbk')
target_val = (target_gbk[0] << 8) | target_gbk[1]
found=0

left=0
right=len(common_array_gbk)-1

start = time.perf_counter()
mergeSort(common_array_gbk)
while(left<=right):
    mid = (left+right)//2
    if (common_array_gbk[mid]==target_val):
        found=1
        break
    if (common_array_gbk[mid]>target_val):
        right=mid-1
    if(common_array_gbk[mid]<target_val):
        left=mid+1
end = time.perf_counter()

if found==1:
        print('Found')
else:
    print('Not found')
        
print(f"Search time: {end - start:.16f} seconds\n")


target=input("Input a Han Zi (to end program input no) : ")

while (target!="no"):
    target_gbk=target.encode('gbk')
        
    target_val = (target_gbk[0] << 8) | target_gbk[1]
        
    found=0
  
    left=0
    right=len(common_array_gbk)-1

    start = time.perf_counter()
    while(left<=right):
        mid = (left+right)//2
        if (common_array_gbk[mid]==target_val):
            found=1
            break
        if (common_array_gbk[mid]>target_val):
            right=mid-1
        if(common_array_gbk[mid]<target_val):
            left=mid+1
    end = time.perf_counter()


    if found==1:
        print('Found')
    else:
        print('Not found')
        
    print(f"Search time: {end - start:.16f} seconds\n")

    target=input("Input a Han Zi (to end program input no) : ")

print("Program ended")